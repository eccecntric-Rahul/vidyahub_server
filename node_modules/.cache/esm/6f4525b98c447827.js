let mongoose,bcrypt;_8c4‍.x([["default",()=>_8c4‍.o]]);_8c4‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_8c4‍.w("bcrypt",[["default",["bcrypt"],function(v){bcrypt=v}]]);

const {Schema}= mongoose;

const adminSchema= new Schema({
    name:{
        type: String,
        required: "Name is required"
    },
    phoneNo: {
        type: String,
        required: "email is required",
        unique: true,
    },
    password: {
        type: String,
        required: "password is required", 
    },
    position:{
        type: String,
        required: "accType is Required",
    },
});


adminSchema.pre("save",function(next){
    let user = this;
    if(user.isModified("password")){
        return bcrypt.hash(user.password,12,function(err,hash){
            if(err){
                _8c4‍.g.console.log(err);
                return next();
            }
            user.password=hash;
            return next();
        })
    }else return next();
});

adminSchema.methods.comparePassword= async function(password){
    return await bcrypt.compare(password,this.password);
    // bcrypt.compare(password,this.password,function(err,match){
    //     if(err) {
    //         console.log("password error",err);
    //         return next(err,false);
    //     }
    //     else if(match){
    //         console.log("passwords match",match);
    //         return next(null,match);
    //     }
    // });
}

_8c4‍.d(mongoose.model("admin",adminSchema));